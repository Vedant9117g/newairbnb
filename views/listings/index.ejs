<% layout('layouts/boilerplate') %>

<h2 class="text-3xl font-bold text-gray-800 mb-6">Listings</h2>

<form action="/listings/new" method="get">
  <button class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded shadow transition">
    Create New Listing
  </button>
</form>

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
  <% if (allListings.length > 0) { %>
    <% for (let listing of allListings) { %>
      <div class="bg-white rounded-lg shadow-lg overflow-hidden">
        <a href="/listings/<%= listing._id %>" class="block hover:opacity-90 transition">
          <img src="<%= listing.image.url %>" class="w-full h-64 object-cover" alt="Image not available" />
          <div class="p-4">
            <h5 class="text-lg font-semibold text-gray-800 mb-2"><%= listing.title %></h5>
            <p class="text-gray-600 text-sm">
              &#8377;<%= listing.price.toLocaleString("en-IN") %> <br />
              <i class="fa-solid fa-location-dot text-gray-500"></i> <%= listing.location %> <br />
              <i class="fa-solid fa-globe text-gray-500"></i> <%= listing.country %>
            </p>
          </div>
        </a>
      </div>
    <% } %>
  <% } else { %>
    <p class="text-gray-700">No listings available.</p>
  <% } %>
</div>
